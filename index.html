<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Herrybloxer</title>

<style>
html,body{
margin:0;
padding:0;
height:100%;
font-family:sans-serif;
overflow:hidden;
}

/* ===== LOADING ===== */

#loading-screen{
position:fixed;
width:100%;
height:100vh;
background:linear-gradient(135deg,#6a00ff,#a1002a);
display:flex;
justify-content:center;
align-items:center;
z-index:1000;
color:white;
transition:opacity .6s ease;
}

.loading-wrapper{
text-align:center;
animation:fadeIn 1s ease;
}

/* –¢–í–û–Ø –ö–ê–†–¢–ò–ù–ö–ê */
.logo-image{
width:150px;
margin:0 auto 25px;
display:block;
animation:spin 4s linear infinite;
filter:drop-shadow(0 15px 30px rgba(0,0,0,.5));
}

#loading-screen h1{
font-size:60px;
margin:0;
text-shadow:0 6px 20px rgba(0,0,0,.4);
}

#loading-screen p{
font-size:22px;
margin-top:20px;
opacity:.85;
}

@keyframes spin{
0%{transform:rotate(0)}
100%{transform:rotate(360deg)}
}

@keyframes fadeIn{
from{opacity:0;transform:translateY(20px)}
to{opacity:1;transform:translateY(0)}
}

/* ===== MAIN ===== */

#main-content{
display:none;
height:100vh;
background:#f5f5f5;
position:relative;
}

.layout{
display:flex;
height:100%;
}

.left{
flex:1;
display:flex;
justify-content:center;
align-items:center;
font-size:40px;
}

.right{
width:320px;
padding:20px;
}

.game-card{
background:#ddd;
height:160px;
border-radius:15px;
display:flex;
justify-content:center;
align-items:center;
font-weight:bold;
cursor:pointer;
box-shadow:0 10px 20px rgba(0,0,0,.2);
transition:.3s;
}

.game-card:hover{
transform:scale(1.05);
}

/* PROFILE */

#profile{
position:absolute;
top:20px;
right:20px;
background:#eee;
padding:8px 12px;
border-radius:10px;
display:flex;
gap:6px;
align-items:center;
}

.verify{
color:#1DA1F2;
font-weight:bold;
}

#edit-box{
position:absolute;
top:20px;
right:200px;
background:white;
padding:10px;
border-radius:10px;
display:none;
flex-direction:column;
gap:8px;
box-shadow:0 10px 20px rgba(0,0,0,.2);
}

/* GAME */

#game-container{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
display:none;
background:black;
}

#exit-game{
position:absolute;
top:20px;
left:20px;
z-index:10;
padding:10px;
}
</style>
</head>

<body>

<!-- LOADING -->
<div id="loading-screen">
<div class="loading-wrapper">

<img src="logo.png" class="logo-image">

<h1>Herrybloxer</h1>
<p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>

</div>
</div>

<!-- MAIN -->
<div id="main-content">

<div id="profile">
üë§ <span id="nickname"></span>
<button id="edit-btn">‚úè</button>
</div>

<div id="edit-box">
<input id="new-nick" placeholder="–ù–æ–≤—ã–π –Ω–∏–∫">
<button id="save-nick">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
</div>

<div class="layout">
<div class="left">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å üéÆ</div>
<div class="right">
<div id="test-game" class="game-card">
The Test Game
</div>
</div>
</div>

</div>

<!-- GAME -->
<div id="game-container">
<button id="exit-game">–í—ã–π—Ç–∏</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>

<script type="module">

/* ===== LOADING ===== */

window.addEventListener("load",()=>{
setTimeout(()=>{
document.getElementById("loading-screen").style.opacity="0";
setTimeout(()=>{
document.getElementById("loading-screen").style.display="none";
document.getElementById("main-content").style.display="block";
},600);
},2000);
});

/* ===== FIREBASE ===== */

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore, doc, getDoc, setDoc, updateDoc, deleteDoc, increment }
from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const firebaseConfig={
apiKey:"–¢–í–û–ô_API_KEY",
authDomain:"–¢–í–û–ô_AUTH_DOMAIN",
projectId:"–¢–í–û–ô_PROJECT_ID"
};

const app=initializeApp(firebaseConfig);
const db=getFirestore(app);

/* ===== OWNER ===== */

const REAL_OWNER_ID="65b73f08-2c93-4ac5-a20c-a5059ffa3bc1";

let ownerId=localStorage.getItem("herrybloxer_owner");
if(!ownerId){
ownerId=crypto.randomUUID();
localStorage.setItem("herrybloxer_owner",ownerId);
}

/* ===== FILTER ===== */

const bannedWords=["–¥—É—Ä–∞–∫","–∏–¥–∏–æ—Ç","–¥–∏–±–∏–ª","—Å–∞—Å—É–Ω","—Å–∞—Å–∞—Ç—å","—Å–æ—Å–∏"];
function bad(name){
return bannedWords.some(w=>name.toLowerCase().includes(w));
}

/* ===== USER SYSTEM ===== */

let nickname=localStorage.getItem("herrybloxer_nick");

function renderNick(){
const el=document.getElementById("nickname");
if(ownerId===REAL_OWNER_ID){
el.innerHTML=nickname+' <span class="verify">‚úî</span>';
}else{
el.textContent=nickname;
}
}

async function createUser(){
const ref=doc(db,"global","userCounter");
const snap=await getDoc(ref);
let n=1;
if(snap.exists()){
n=snap.data().count+1;
await updateDoc(ref,{count:increment(1)});
}else{
await setDoc(ref,{count:1});
}
nickname="user"+n;
localStorage.setItem("herrybloxer_nick",nickname);
await setDoc(doc(db,"usernames",nickname),{created:Date.now()});
renderNick();
}

if(!nickname){
await createUser();
}else{
renderNick();
}

/* ===== EDIT NICK ===== */

const editBtn=document.getElementById("edit-btn");
const editBox=document.getElementById("edit-box");
const saveBtn=document.getElementById("save-nick");
const newNickInput=document.getElementById("new-nick");

editBtn.onclick=()=>{
editBox.style.display=
editBox.style.display==="flex"?"none":"flex";
};

saveBtn.onclick=async()=>{
const newNick=newNickInput.value.trim();
if(!newNick||newNick.length<3)
return alert("–ú–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞");

if(bad(newNick))
return alert("–ó–∞–ø—Ä–µ—â—ë–Ω–Ω–æ–µ —Å–ª–æ–≤–æ");

const ref=doc(db,"usernames",newNick);
if((await getDoc(ref)).exists())
return alert("–ù–∏–∫ –∑–∞–Ω—è—Ç");

await setDoc(ref,{created:Date.now()});
await deleteDoc(doc(db,"usernames",nickname));

nickname=newNick;
localStorage.setItem("herrybloxer_nick",nickname);
renderNick();
editBox.style.display="none";
};

/* ===== 3D GAME ===== */

const card=document.getElementById("test-game");
const gameContainer=document.getElementById("game-container");
const exitBtn=document.getElementById("exit-game");

card.onclick=()=>{
document.getElementById("main-content").style.display="none";
gameContainer.style.display="block";
startGame();
};

exitBtn.onclick=()=>{
gameContainer.innerHTML='<button id="exit-game">–í—ã–π—Ç–∏</button>';
gameContainer.style.display="none";
document.getElementById("main-content").style.display="block";
};

function startGame(){

const scene=new THREE.Scene();
scene.background=new THREE.Color(0x87ceeb);

const camera=new THREE.PerspectiveCamera(
75,window.innerWidth/window.innerHeight,.1,1000);

const renderer=new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth,window.innerHeight);
gameContainer.appendChild(renderer.domElement);

const light=new THREE.DirectionalLight(0xffffff,1);
light.position.set(5,10,5);
scene.add(light);

const ground=new THREE.Mesh(
new THREE.PlaneGeometry(100,100),
new THREE.MeshStandardMaterial({color:0x228B22})
);
ground.rotation.x=-Math.PI/2;
scene.add(ground);

const player=new THREE.Mesh(
new THREE.BoxGeometry(1,2,1),
new THREE.MeshStandardMaterial({color:0xff0000})
);
player.position.y=1;
scene.add(player);

camera.position.set(0,5,8);

const keys={};
document.addEventListener("keydown",e=>keys[e.key.toLowerCase()]=true);
document.addEventListener("keyup",e=>keys[e.key.toLowerCase()]=false);

let velocityY=0;
let onGround=true;

function animate(){
requestAnimationFrame(animate);

const speed=.15;

if(keys["w"])player.position.z-=speed;
if(keys["s"])player.position.z+=speed;
if(keys["a"])player.position.x-=speed;
if(keys["d"])player.position.x+=speed;

if(keys[" "]&&onGround){
velocityY=.2;
onGround=false;
}

velocityY-=.01;
player.position.y+=velocityY;

if(player.position.y<=1){
player.position.y=1;
velocityY=0;
onGround=true;
}

camera.position.x=player.position.x;
camera.position.z=player.position.z+8;
camera.lookAt(player.position);

renderer.render(scene,camera);
}

animate();
}

</script>
</body>
</html>

























